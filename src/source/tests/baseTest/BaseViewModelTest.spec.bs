import "pkg:/source/base/BaseViewModel.bs"

namespace tests

    ' Test-only ViewModel that doesn't require framework context
    class TestViewModel extends Rotor.ViewModel
        override sub onUpdateView()
            ' No-op: skip render() call in isolated tests
        end sub
    end class

    @suite("BaseViewModel tests")
    class BaseViewModelTestSuite extends rooibos.BaseTestSuite

        @describe("ViewModel initialization")

        @it("creates ViewModel base class")
        function _()
            vm = new Rotor.ViewModel()

            m.assertNotEqual(vm, invalid)
            m.assertTrue(vm.isViewModel)
        end function

        @it("setProps updates props")
        function _()
            ' Use TestViewModel to avoid framework dependency
            vm = new tests.TestViewModel()
            vm.setProps({ title: "Test" })

            m.assertEqual(vm.props.title, "Test")
        end function

        @it("template returns empty object")
        function _()
            vm = new Rotor.ViewModel()
            temp = vm.template()

            m.assertNotEqual(temp, invalid)
        end function

    end class
end namespace
